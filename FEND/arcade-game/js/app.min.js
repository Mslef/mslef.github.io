var score=0,message="",difficulty={Easy:9,Medium:18,Hard:24},displayValues=function(){$("#score").html(score.toString()),$("#message").html(message)};displayValues();var Character=function(a,b,c){this.sprite=a,this.x=b,this.y=c};Character.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)};var Enemy=function(a,b,c,d){Character.call(this,a,b,c),this.speed=d};Enemy.prototype=Object.create(Character.prototype),Enemy.prototype.update=function(a){Math.abs(player.x-this.x)<=40&&Math.abs(player.y-this.y)<=40&&(score-=20,message="You got hit!",displayValues(),player.x=200,player.y=300),this.x>=500?this.x=-200-Math.ceil(1e3*Math.random()):this.x+=this.speed*a};var Player=function(){Character.call(this,"images/char-boy.png",202,300)};Player.prototype=Object.create(Character.prototype),Player.prototype.update=function(){},Player.prototype.handleInput=function(a){switch(a){case"up":this.y-=30;break;case"down":if(this.y<=370){this.y+=30;break}break;case"left":if(this.x>=0){this.x-=30;break}break;case"right":if(this.x<=400){this.x+=30;break}break;default:console.log("Input error")}this.y<=-20&&(this.y=300,this.x=200,score+=100,message="Well done! You got through!",displayValues())};var createEnemies=function(a){allEnemies=[];for(var b=0;a>b;b++){var c=-200-Math.ceil(1e3*Math.random()),d=Math.ceil(200*Math.random()),e=50+b%3*85;allEnemies.push(new Enemy("images/enemy-bug.png",c,e,d))}return allEnemies},allEnemies=createEnemies(difficulty.Easy),player=new Player;document.addEventListener("keyup",function(a){var b={37:"left",38:"up",39:"right",40:"down"};player.handleInput(b[a.keyCode])}),$("select").change(function(){$(this).blur()}),$("#character").change(function(){var a="images/char-"+$("#character option:selected").text()+".png";$(".char-preview img").attr("src",a),player.sprite=a}),$("#difficulty").change(function(){allEnemies=createEnemies(difficulty[$("#difficulty option:selected").text()]),$("canvas").focus()});